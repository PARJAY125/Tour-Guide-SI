<!DOCTYPE html>
<html>
  <head>
    <title>Wisata Voice Assistant</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://code.responsivevoice.org/responsivevoice.js"></script>
    <style>
      @media (max-width: 600px) {
        body {
          padding: 10px;
        }

        .container {
          padding: 16px;
          box-shadow: none;
          border-radius: 0;
        }

        h2 {
          font-size: 20px;
        }

        button {
          width: 100%;
          margin: 6px 0;
          font-size: 16px;
        }

        select {
          font-size: 16px;
        }

        p,
        label {
          font-size: 15px;
        }

        #descriptionArea {
          font-size: 15px;
        }
      }

      body {
        font-family: Arial, sans-serif;
        background-color: #f0f4f8;
        padding: 20px;
        color: #333;
      }

      h2 {
        text-align: center;
        color: #2c3e50;
      }

      .container {
        max-width: 600px;
        margin: 0 auto;
        background: #fff;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }

      button {
        background-color: #3498db;
        color: white;
        border: none;
        padding: 10px 16px;
        margin: 6px 4px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
      }

      button:hover {
        background-color: #2980b9;
      }

      select {
        padding: 8px;
        width: 100%;
        margin-top: 8px;
        border-radius: 6px;
        border: 1px solid #ccc;
        font-size: 14px;
      }

      p,
      label {
        margin-top: 12px;
        font-size: 14px;
      }

      #descriptionArea {
        margin-top: 16px;
        background-color: #ecf0f1;
        padding: 10px;
        border-radius: 8px;
      }

      #location,
      #feedback {
        font-weight: bold;
        color: #2c3e50;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2>Asisten Wisata Web</h2>

      <!-- GPS -->
      <button onclick="getLocation()">üìç Dapatkan Lokasi</button>
      <p id="location">Lokasi: -</p>

      <!-- Dropdown Pilih Tempat -->
      <label for="placeSelect">Pilih Tempat Wisata:</label>
      <select id="placeSelect" onchange="updateSelectedPlace()">
        <option value="">-- Pilih Tempat --</option>
      </select>

      <!-- TTS -->
      <button onclick="playTTS()">üîä Baca Deskripsi</button>
      <button onclick="stopTTS()">Stop</button>

      <div id="descriptionArea">
        <b>Deskripsi:</b>
        <p id="descriptionText">-</p>
      </div>

      <br />

      <!-- STT -->
      <button onclick="startListening()">üéôÔ∏è Feedback Suara</button>
      <p id="feedback">Feedback: -</p>
    </div>

    <script>
      const places = [
        {
          name: 'Pantai Kuta',
          lat: -8.7178,
          lon: 115.1686,
          description:
            'Selamat datang di Pantai Kuta, surga peselancar dan wisatawan mancanegara...',
        },
        {
          name: 'Ubud Monkey Forest',
          lat: -8.5191,
          lon: 115.259,
          description:
            'Anda sekarang berada di Ubud Monkey Forest, kawasan hutan tropis...',
        },
        {
          name: 'Tanah Lot',
          lat: -8.6216,
          lon: 115.0868,
          description:
            'Di depan Anda berdiri megah Tanah Lot, pura suci yang dibangun di atas batu karang...',
        },
        {
          name: 'Tegallalang Rice Terrace',
          lat: -8.4352,
          lon: 115.2798,
          description:
            'Selamat datang di Tegallalang Rice Terrace, hamparan sawah berundak yang memesona...',
        },
        {
          name: 'Pantai Sanur',
          lat: -8.6939,
          lon: 115.2632,
          description:
            'Pantai Sanur dikenal dengan suasana yang lebih tenang dan cocok untuk keluarga...',
        },
        {
          name: 'Garuda Wisnu Kencana (GWK)',
          lat: -8.8077,
          lon: 115.1668,
          description:
            'Anda berada di kawasan budaya Garuda Wisnu Kencana, tempat berdirinya patung raksasa...',
        },
        {
          name: 'Pura Besakih',
          lat: -8.374,
          lon: 115.4517,
          description:
            'Pura Besakih, atau dikenal sebagai Mother Temple of Bali, adalah kompleks pura terbesar...',
        },
        {
          name: 'Danau Beratan & Pura Ulun Danu',
          lat: -8.275,
          lon: 115.1669,
          description:
            'Pura Ulun Danu yang mengapung di Danau Beratan menyuguhkan pemandangan yang tenang...',
        },
        {
          name: 'Pantai Pandawa',
          lat: -8.8486,
          lon: 115.1909,
          description:
            'Pantai Pandawa tersembunyi di balik tebing kapur yang dramatis...',
        },
        {
          name: 'Nusa Penida ‚Äì Kelingking Beach',
          lat: -8.7331,
          lon: 115.4855,
          description:
            'Di Kelingking Beach Nusa Penida, Anda akan disuguhi tebing yang membentuk siluet seperti jari kelingking...',
        },
        {
          name: 'Pantai Dreamland',
          lat: -8.7961,
          lon: 115.1078,
          description:
            'Pantai Dreamland adalah pantai pasir putih yang dikelilingi tebing batu karang...',
        },
        {
          name: 'Goa Gajah',
          lat: -8.519,
          lon: 115.2906,
          description:
            'Goa Gajah atau Elephant Cave adalah situs arkeologi bersejarah dengan pahatan batu yang unik...',
        },
        {
          name: 'Pantai Amed',
          lat: -8.3344,
          lon: 115.6813,
          description:
            'Pantai Amed terkenal dengan keindahan bawah lautnya yang luar biasa...',
        },
        {
          name: 'Tirta Empul',
          lat: -8.4193,
          lon: 115.3184,
          description:
            'Tirta Empul adalah pura dengan kolam suci yang digunakan masyarakat Hindu Bali...',
        },
        {
          name: 'Pantai Lovina',
          lat: -8.1769,
          lon: 115.0634,
          description:
            'Pantai Lovina berada di utara Bali, terkenal dengan aktivitas melihat lumba-lumba di pagi hari...',
        },
        {
          name: 'Air Terjun Gitgit',
          lat: -8.1834,
          lon: 115.1449,
          description:
            'Air Terjun Gitgit adalah salah satu air terjun tertinggi di Bali...',
        },
        {
          name: 'Bali Safari & Marine Park',
          lat: -8.619,
          lon: 115.2918,
          description:
            'Di Bali Safari & Marine Park, Anda dapat menjelajahi kehidupan satwa liar dari berbagai benua...',
        },
        {
          name: 'Bukit Campuhan',
          lat: -8.5069,
          lon: 115.2582,
          description:
            'Jalur trekking di Bukit Campuhan menawarkan pemandangan alam Ubud yang hijau...',
        },
        {
          name: 'Pantai Blue Lagoon',
          lat: -8.5198,
          lon: 115.5203,
          description:
            'Blue Lagoon adalah pantai kecil dengan air sebening kristal dan spot snorkeling yang menakjubkan...',
        },
        {
          name: 'Waterbom Bali',
          lat: -8.7267,
          lon: 115.1736,
          description:
            'Waterbom Bali adalah taman air terbaik di Asia Tenggara. Cocok untuk liburan keluarga...',
        },
      ];

      const select = document.getElementById('placeSelect');
      places.forEach((place, i) => {
        const option = document.createElement('option');
        option.value = i;
        option.textContent = place.name;
        select.appendChild(option);
      });

      let selectedPlace = null;
      function updateSelectedPlace() {
        const index = select.value;
        selectedPlace = places[index];
        document.getElementById('descriptionText').innerText = selectedPlace
          ? selectedPlace.description
          : '-';
      }

      function getLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            (pos) => {
              const lat = pos.coords.latitude;
              const lon = pos.coords.longitude;
              document.getElementById(
                'location'
              ).innerText = `Lokasi: ${lat.toFixed(5)}, ${lon.toFixed(5)}`;
            },
            (err) => {
              alert('Gagal mendapatkan lokasi: ' + err.message);
            }
          );
        } else {
          alert('Browser tidak mendukung Geolocation.');
        }
      }

      function playTTS() {
        if (!selectedPlace) {
          alert('Silakan pilih tempat wisata terlebih dahulu.');
          return;
        }
        responsiveVoice.speak(selectedPlace.description, 'Indonesian Female', {
          pitch: 1,
          rate: 1,
          volume: 1,
        });
      }

      function stopTTS() {
        responsiveVoice.cancel();
      }

      function startListening() {
        if (!('webkitSpeechRecognition' in window)) {
          alert('Speech Recognition tidak didukung di browser ini.');
          return;
        }

        const recognition = new webkitSpeechRecognition();
        recognition.lang = 'id-ID';
        recognition.continuous = false;
        recognition.interimResults = false;

        recognition.onresult = (event) => {
          const result = event.results[0][0].transcript;
          document.getElementById('feedback').innerText = 'Feedback: ' + result;
        };

        recognition.onerror = (event) => {
          alert('Error saat pengenalan suara: ' + event.error);
        };

        recognition.start();
      }
    </script>
  </body>
</html>
